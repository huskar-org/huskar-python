sudo: false
dist: xenial
addons:
  apt:
    packages:
    - libevent-dev
cache:
  pip: true
  directories:
  - zookeeper
language: python
python:
- '2.7'
matrix:
  include:
  - python: '2.7'
    env: TOX_ENV=py27
  # - python: '3.4'
  #   env: TOX_ENV=py34
  # - python: '3.5'
  #   env: TOX_ENV=py35
  # - python: '3.6'
  #   env: TOX_ENV=py36
  # - python: '3.7'
  #   env: TOX_ENV=py37
  # - python: '3.8'
  #   env: TOX_ENV=py38
  # - python: pypy
  #   env: TOX_ENV=pypy
  # - python: pypy3
  #   env: TOX_ENV=pypy3
notifications:
  email: false
install:
  - pip install tox codecov
  - ZOOKEEPER_VERSION=3.4.9 bash -x ./tools/ci/ensure-zookeeper-env.sh
script: |
  export ZOOKEEPER_VERSION=3.4.9
  export ZOOKEEPER_PATH="$(pwd)/zookeeper/3.4.9"

  tox -e $TOX_ENV

  codecov
